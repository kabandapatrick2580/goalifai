2025-10-07 17:59:22,584 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-06T00:02:12.725805'}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T00:28:01.312263'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 17:59:22,597 - app - INFO - Allocated 533.3333333333332800 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:70]
2025-10-07 17:59:22,603 - app - INFO - Allocated 266.6666666666666400 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:70]
2025-10-07 17:59:22,603 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 533.3333333333333}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 266.66666666666663}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:78]
2025-10-07 18:00:12,898 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-06T00:02:12.725805'}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T00:28:01.312263'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 18:00:12,911 - app - INFO - Allocated 1332533.3333333332000800 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:70]
2025-10-07 18:00:12,917 - app - INFO - Allocated 666266.6666666666000400 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:70]
2025-10-07 18:00:12,917 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 1332533.3333333333}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 666266.6666666666}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:78]
2025-10-07 18:08:38,351 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-06T00:02:12.725805'}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T00:28:01.312263'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 18:08:38,364 - app - INFO - Allocated 1332533.3333333332000800 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:71]
2025-10-07 18:08:38,370 - app - INFO - Allocated 666266.6666666666000400 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:71]
2025-10-07 18:08:38,370 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 1332533.3333333333}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 666266.6666666666}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:79]
2025-10-07 18:08:50,650 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-06T00:02:12.725805'}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T00:28:01.312263'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 18:08:50,664 - app - INFO - Allocated 1332533.3333333332000800 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:71]
2025-10-07 18:08:50,671 - app - INFO - Allocated 666266.6666666666000400 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:71]
2025-10-07 18:08:50,671 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 1332533.3333333333}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 666266.6666666666}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:79]
2025-10-07 18:09:54,798 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-06T00:02:12.725805'}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T00:28:01.312263'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 18:09:54,818 - app - INFO - Allocated 0.00 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:71]
2025-10-07 18:09:54,824 - app - INFO - Allocated 0.00 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:71]
2025-10-07 18:09:54,824 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 0.0}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 0.0}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:79]
2025-10-07 18:15:09,072 - app - ERROR - Error during allocation recalculation: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 6 column 5 (char 134) - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:91]
2025-10-07 18:15:09,083 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/local-env/lib/python3.12/site-packages/werkzeug/wrappers/request.py", line 611, in get_json
    rv = self.json_module.loads(data)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/patrick/goalifai/local-env/lib/python3.12/site-packages/flask/json/provider.py", line 187, in loads
    return json.loads(s, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 6 column 5 (char 134)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 24, in recalculate_allocations
    data = request.get_json()
           ^^^^^^^^^^^^^^^^^^
  File "/home/patrick/goalifai/local-env/lib/python3.12/site-packages/werkzeug/wrappers/request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/patrick/goalifai/local-env/lib/python3.12/site-packages/flask/wrappers.py", line 214, in on_json_loading_failed
    return super().on_json_loading_failed(e)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/patrick/goalifai/local-env/lib/python3.12/site-packages/werkzeug/wrappers/request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 6 column 5 (char 134)
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:92]
2025-10-07 18:15:16,275 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-06T00:02:12.725805'}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T00:28:01.312263'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 18:15:16,297 - app - INFO - Allocated 1332533.3333333332000800 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 18:15:16,303 - app - INFO - Allocated 50000.0 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 18:15:16,304 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 1332533.3333333333}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 50000.0}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:83]
2025-10-07 18:15:36,539 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-06T00:02:12.725805'}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T00:28:01.312263'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 18:15:36,554 - app - INFO - Allocated 5000000.0 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 18:15:36,558 - app - INFO - Allocated 50000.0 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 18:15:36,558 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 5000000.0}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 50000.0}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:83]
2025-10-07 18:18:20,831 - app - ERROR - Error finalizing allocations for month 2025-10: 'dict' object has no attribute 'is_finalized' - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:129]
2025-10-07 18:18:20,833 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 112, in finalize_allocations
    if allocation.is_finalized:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'is_finalized'
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:130]
2025-10-07 18:18:31,513 - app - ERROR - Error finalizing allocations for month 2025-10: 'dict' object has no attribute 'is_finalized' - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:129]
2025-10-07 18:18:31,515 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 112, in finalize_allocations
    if allocation.is_finalized:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'is_finalized'
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:130]
2025-10-07 18:19:01,659 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-06T00:02:12.725805'}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T00:28:01.312263'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 18:19:01,666 - app - INFO - Allocated 1332533.3333333332000800 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 18:19:01,670 - app - INFO - Allocated 50000.0 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 18:19:01,670 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 1332533.3333333333}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 50000.0}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:83]
2025-10-07 18:19:20,179 - app - ERROR - Error finalizing allocations for month 2025-10: 'dict' object has no attribute 'is_finalized' - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:129]
2025-10-07 18:19:20,180 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 112, in finalize_allocations
    if allocation.is_finalized:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'is_finalized'
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:130]
2025-10-07 18:20:48,630 - app - ERROR - Error finalizing allocations for month 2025-10: 'dict' object has no attribute 'is_completed' - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:129]
2025-10-07 18:20:48,632 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 112, in finalize_allocations
    if allocation.is_completed:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'is_completed'
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:130]
2025-10-07 18:23:02,694 - app - ERROR - Error finalizing allocations for month 2025-10: 'is_finalized' - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:129]
2025-10-07 18:23:02,695 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 112, in finalize_allocations
    if allocation['is_finalized']:
       ~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'is_finalized'
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:130]
2025-10-07 18:26:28,087 - app - INFO - Finalizing allocations for month 2025-10: [{'allocation_id': 'c43ec39f-4385-4d5c-a747-0a14d25e71bb', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'month': '2025-10', 'allocated_amount': 50000.0, 'created_at': '2025-10-07T00:28:09.538595', 'updated_at': '2025-10-07T18:15:16.299703'}, {'allocation_id': '27e8b38b-bba8-47ef-bc31-3b935b716bf0', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'month': '2025-10', 'allocated_amount': 1332533.33, 'created_at': '2025-10-07T00:11:44.083376', 'updated_at': '2025-10-07T18:19:01.661258'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-07 18:26:28,087 - app - ERROR - Error finalizing allocations for month 2025-10: 'is_finalized' - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:130]
2025-10-07 18:26:28,088 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 113, in finalize_allocations
    if allocation['is_finalized']:
       ~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'is_finalized'
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:131]
2025-10-07 18:40:41,715 - app - INFO - Finalizing allocations for month 2025-10: {'7c75f482-dba6-4322-86d6-7bb1914d8eb7': {'goal_name': 'Trip to Kbuye', 'total_allocated': 50000.0, 'allocations': [{'allocation_id': 'c43ec39f-4385-4d5c-a747-0a14d25e71bb', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 50000.0, 'created_at': '2025-10-07T00:28:09.538595', 'updated_at': '2025-10-07T18:15:16.299703', 'is_finalized': None, 'is_deficit': None}]}, 'd033c7a1-95de-4f17-acf7-caf87aa1238d': {'goal_name': 'Plot of a land', 'total_allocated': 1332533.33, 'allocations': [{'allocation_id': '27e8b38b-bba8-47ef-bc31-3b935b716bf0', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 1332533.33, 'created_at': '2025-10-07T00:11:44.083376', 'updated_at': '2025-10-07T18:19:01.661258', 'is_finalized': None, 'is_deficit': None}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-07 18:40:41,726 - app - ERROR - Error finalizing allocations for month 2025-10: 'dict' object has no attribute 'current_amount' - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:141]
2025-10-07 18:40:41,729 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 134, in finalize_allocations
    goal.current_amount += total_allocated_for_goal
    ^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'current_amount'
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:142]
2025-10-07 18:42:27,668 - app - INFO - Finalizing allocations for month 2025-10: {'7c75f482-dba6-4322-86d6-7bb1914d8eb7': {'goal_name': 'Trip to Kbuye', 'total_allocated': 50000.0, 'allocations': [{'allocation_id': 'c43ec39f-4385-4d5c-a747-0a14d25e71bb', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 50000.0, 'created_at': '2025-10-07T00:28:09.538595', 'updated_at': '2025-10-07T18:15:16.299703', 'is_finalized': None, 'is_deficit': None}]}, 'd033c7a1-95de-4f17-acf7-caf87aa1238d': {'goal_name': 'Plot of a land', 'total_allocated': 1332533.33, 'allocations': [{'allocation_id': '27e8b38b-bba8-47ef-bc31-3b935b716bf0', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 1332533.33, 'created_at': '2025-10-07T00:11:44.083376', 'updated_at': '2025-10-07T18:19:01.661258', 'is_finalized': None, 'is_deficit': None}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-07 18:42:27,680 - app - ERROR - Error finalizing allocations for month 2025-10: Class 'builtins.dict' is not mapped - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:141]
2025-10-07 18:42:27,684 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/local-env/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3477, in add
    state = attributes.instance_state(instance)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute '_sa_instance_state'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 135, in finalize_allocations
    db.session.add(goal)
  File "/home/patrick/goalifai/local-env/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 380, in add
    return self._proxied.add(instance, _warn=_warn)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/patrick/goalifai/local-env/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3479, in add
    raise exc.UnmappedInstanceError(instance) from err
sqlalchemy.orm.exc.UnmappedInstanceError: Class 'builtins.dict' is not mapped
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:142]
2025-10-07 18:46:24,177 - app - INFO - Finalizing allocations for month 2025-10: {'7c75f482-dba6-4322-86d6-7bb1914d8eb7': {'goal_name': 'Trip to Kbuye', 'total_allocated': 50000.0, 'allocations': [{'allocation_id': 'c43ec39f-4385-4d5c-a747-0a14d25e71bb', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 50000.0, 'created_at': '2025-10-07T00:28:09.538595', 'updated_at': '2025-10-07T18:15:16.299703', 'is_finalized': None, 'is_deficit': None}]}, 'd033c7a1-95de-4f17-acf7-caf87aa1238d': {'goal_name': 'Plot of a land', 'total_allocated': 1332533.33, 'allocations': [{'allocation_id': '27e8b38b-bba8-47ef-bc31-3b935b716bf0', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 1332533.33, 'created_at': '2025-10-07T00:11:44.083376', 'updated_at': '2025-10-07T18:19:01.661258', 'is_finalized': None, 'is_deficit': None}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-07 18:46:24,185 - app - ERROR - Error finalizing allocations for month 2025-10: 'Goal' object is not subscriptable - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:141]
2025-10-07 18:46:24,186 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 134, in finalize_allocations
    goal['current_amount'] += total_allocated_for_goal
    ~~~~^^^^^^^^^^^^^^^^^^
TypeError: 'Goal' object is not subscriptable
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:142]
2025-10-07 18:46:53,740 - app - INFO - Finalizing allocations for month 2025-10: {'7c75f482-dba6-4322-86d6-7bb1914d8eb7': {'goal_name': 'Trip to Kbuye', 'total_allocated': 50000.0, 'allocations': [{'allocation_id': 'c43ec39f-4385-4d5c-a747-0a14d25e71bb', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 50000.0, 'created_at': '2025-10-07T00:28:09.538595', 'updated_at': '2025-10-07T18:15:16.299703', 'is_finalized': None, 'is_deficit': None}]}, 'd033c7a1-95de-4f17-acf7-caf87aa1238d': {'goal_name': 'Plot of a land', 'total_allocated': 1332533.33, 'allocations': [{'allocation_id': '27e8b38b-bba8-47ef-bc31-3b935b716bf0', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 1332533.33, 'created_at': '2025-10-07T00:11:44.083376', 'updated_at': '2025-10-07T18:19:01.661258', 'is_finalized': None, 'is_deficit': None}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-07 18:46:53,749 - app - ERROR - Error finalizing allocations for month 2025-10: unsupported operand type(s) for +=: 'decimal.Decimal' and 'float' - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:141]
2025-10-07 18:46:53,750 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goal_recalculation.py", line 134, in finalize_allocations
    goal.current_amount += total_allocated_for_goal
TypeError: unsupported operand type(s) for +=: 'decimal.Decimal' and 'float'
 - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:142]
2025-10-07 18:47:37,513 - app - INFO - Finalizing allocations for month 2025-10: {'7c75f482-dba6-4322-86d6-7bb1914d8eb7': {'goal_name': 'Trip to Kbuye', 'total_allocated': 50000.0, 'allocations': [{'allocation_id': 'c43ec39f-4385-4d5c-a747-0a14d25e71bb', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 50000.0, 'created_at': '2025-10-07T00:28:09.538595', 'updated_at': '2025-10-07T18:15:16.299703', 'is_finalized': None, 'is_deficit': None}]}, 'd033c7a1-95de-4f17-acf7-caf87aa1238d': {'goal_name': 'Plot of a land', 'total_allocated': 1332533.33, 'allocations': [{'allocation_id': '27e8b38b-bba8-47ef-bc31-3b935b716bf0', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 1332533.33, 'created_at': '2025-10-07T00:11:44.083376', 'updated_at': '2025-10-07T18:19:01.661258', 'is_finalized': None, 'is_deficit': None}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-07 18:50:14,110 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 50000.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T18:47:37.522136'}, {'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 1332533.33, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-07T18:47:37.529979'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 18:50:14,122 - app - INFO - Allocated 0.0 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 18:50:14,133 - app - INFO - Allocated 665866.6666666666000800 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 18:50:14,134 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 0.0}, {'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 665866.6666666666}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:83]
2025-10-07 22:33:24,976 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 5000000.0, 'current_amount': 1332533.33, 'monthly_contribution': 0.0, 'priority': {'priority_id': '5402090c-99d9-475a-820a-bf9398a22055', 'name': 'high', 'percentage': 80.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-06T00:02:12.725802', 'updated_at': '2025-10-07T18:47:37.529979'}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 35000.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T00:28:01.312258', 'updated_at': '2025-10-07T18:47:37.522136'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 22:33:24,998 - app - INFO - Allocated 586666.6666666666080000 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 22:33:25,005 - app - INFO - Allocated 15000.0 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 22:33:25,005 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': 'd033c7a1-95de-4f17-acf7-caf87aa1238d', 'goal_title': 'Plot of a land', 'allocated_amount': 586666.6666666666}, {'goal_id': '7c75f482-dba6-4322-86d6-7bb1914d8eb7', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 15000.0}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:83]
2025-10-07 22:33:46,240 - app - INFO - Finalizing allocations for month 2025-10: {'d033c7a1-95de-4f17-acf7-caf87aa1238d': {'goal_name': 'Plot of a land', 'total_allocated': 586666.67, 'allocations': [{'allocation_id': '27e8b38b-bba8-47ef-bc31-3b935b716bf0', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 586666.67, 'created_at': '2025-10-07T00:11:44.083376', 'updated_at': '2025-10-07T22:33:24.983542', 'is_finalized': True, 'is_deficit': None}]}, '7c75f482-dba6-4322-86d6-7bb1914d8eb7': {'goal_name': 'Trip to Kbuye', 'total_allocated': 15000.0, 'allocations': [{'allocation_id': 'c43ec39f-4385-4d5c-a747-0a14d25e71bb', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 15000.0, 'created_at': '2025-10-07T00:28:09.538595', 'updated_at': '2025-10-07T22:33:25.001389', 'is_finalized': True, 'is_deficit': None}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-07 22:33:46,245 - app - INFO - Allocation 27e8b38b-bba8-47ef-bc31-3b935b716bf0 already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-07 22:33:46,250 - app - INFO - Allocation c43ec39f-4385-4d5c-a747-0a14d25e71bb already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-07 22:34:30,280 - app - INFO - Finalizing allocations for month 2025-10: {'d033c7a1-95de-4f17-acf7-caf87aa1238d': {'goal_name': 'Plot of a land', 'total_allocated': 586666.67, 'allocations': [{'allocation_id': '27e8b38b-bba8-47ef-bc31-3b935b716bf0', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 586666.67, 'created_at': '2025-10-07T00:11:44.083376', 'updated_at': '2025-10-07T22:33:24.983542', 'is_finalized': True, 'is_deficit': None}]}, '7c75f482-dba6-4322-86d6-7bb1914d8eb7': {'goal_name': 'Trip to Kbuye', 'total_allocated': 15000.0, 'allocations': [{'allocation_id': 'c43ec39f-4385-4d5c-a747-0a14d25e71bb', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 15000.0, 'created_at': '2025-10-07T00:28:09.538595', 'updated_at': '2025-10-07T22:33:25.001389', 'is_finalized': True, 'is_deficit': None}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-07 22:34:30,282 - app - INFO - Allocation 27e8b38b-bba8-47ef-bc31-3b935b716bf0 already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-07 22:34:30,287 - app - INFO - Allocation c43ec39f-4385-4d5c-a747-0a14d25e71bb already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-07 22:36:48,850 - app - INFO - Finalizing allocations for month 2025-11: {'d033c7a1-95de-4f17-acf7-caf87aa1238d': {'goal_name': 'Plot of a land', 'total_allocated': 586666.67, 'allocations': [{'allocation_id': '27e8b38b-bba8-47ef-bc31-3b935b716bf0', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-11', 'allocated_amount': 586666.67, 'created_at': '2025-10-07T00:11:44.083376', 'updated_at': '2025-10-07T22:33:24.983542', 'is_finalized': True, 'is_deficit': None}]}, '7c75f482-dba6-4322-86d6-7bb1914d8eb7': {'goal_name': 'Trip to Kbuye', 'total_allocated': 15000.0, 'allocations': [{'allocation_id': 'c43ec39f-4385-4d5c-a747-0a14d25e71bb', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-11', 'allocated_amount': 15000.0, 'created_at': '2025-10-07T00:28:09.538595', 'updated_at': '2025-10-07T22:33:25.001389', 'is_finalized': True, 'is_deficit': None}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-07 22:36:48,853 - app - INFO - Allocation 27e8b38b-bba8-47ef-bc31-3b935b716bf0 already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-07 22:36:48,858 - app - INFO - Allocation c43ec39f-4385-4d5c-a747-0a14d25e71bb already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-07 22:39:06,374 - app - INFO - Goal Trip to Kbuye created successfully - [in /home/patrick/goalifai/app/api/v1/client/goals.py:49]
2025-10-07 22:42:35,610 - app - INFO - Goal Plot of a land created successfully - [in /home/patrick/goalifai/app/api/v1/client/goals.py:49]
2025-10-07 22:43:28,569 - app - INFO - All goals for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': '78704e65-4079-4496-a482-871ce01d38ba', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Trip to Kbuye', 'description': None, 'category_id': UUID('3a6b20c4-9d0c-4417-a5eb-04c395cb290d'), 'target_amount': 50000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '162a5ab3-a236-4b49-8319-2fc43728f64f', 'name': 'low', 'percentage': 40.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T22:39:06.364477', 'updated_at': '2025-10-07T22:39:06.364483'}, {'goal_id': 'e81c3366-a6ba-43b1-9be3-9042fe420576', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'title': 'Plot of a land', 'description': None, 'category_id': UUID('7e96e1da-d61d-4fe4-99fe-503c301700f3'), 'target_amount': 5000000.0, 'current_amount': 0.0, 'monthly_contribution': 0.0, 'priority': {'priority_id': '7b6b377f-a175-4bdd-87a1-cbf6a1242750', 'name': 'medium', 'percentage': 60.0}, 'due_date': None, 'expected_completion_date': None, 'funding_gap': 0, 'status': 'in progress', 'is_completed': False, 'is_active': True, 'created_at': '2025-10-07T22:42:35.596876', 'updated_at': '2025-10-07T22:42:35.596880'}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:38]
2025-10-07 22:43:28,586 - app - INFO - Allocated 50000.0 to goal Trip to Kbuye for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 22:43:28,591 - app - INFO - Allocated 119280.0 to goal Plot of a land for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:75]
2025-10-07 22:43:28,591 - app - INFO - Allocation summary for user f280eb9e-063d-40ae-83f2-8c47aeb9ea3f: [{'goal_id': '78704e65-4079-4496-a482-871ce01d38ba', 'goal_title': 'Trip to Kbuye', 'allocated_amount': 50000.0}, {'goal_id': 'e81c3366-a6ba-43b1-9be3-9042fe420576', 'goal_title': 'Plot of a land', 'allocated_amount': 119280.0}] - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:83]
2025-10-07 22:43:52,986 - app - INFO - Finalizing allocations for month 2025-10: {'78704e65-4079-4496-a482-871ce01d38ba': {'goal_name': 'Trip to Kbuye', 'total_allocated': 50000.0, 'allocations': [{'allocation_id': '10bb5e9a-3887-4aa6-b98b-838698063bae', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 50000.0, 'created_at': '2025-10-07T22:43:28.572595', 'updated_at': '2025-10-07T22:43:28.572599', 'is_finalized': False, 'is_deficit': False}]}, 'e81c3366-a6ba-43b1-9be3-9042fe420576': {'goal_name': 'Plot of a land', 'total_allocated': 119280.0, 'allocations': [{'allocation_id': '62af914a-dd28-4515-855b-63bf6c4f2a23', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 119280.0, 'created_at': '2025-10-07T22:43:28.587913', 'updated_at': '2025-10-07T22:43:28.587916', 'is_finalized': False, 'is_deficit': False}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-08 08:12:15,271 - app - INFO - Finalizing allocations for month 2025-10: {'78704e65-4079-4496-a482-871ce01d38ba': {'goal_name': 'Trip to Kbuye', 'total_allocated': 50000.0, 'allocations': [{'allocation_id': '10bb5e9a-3887-4aa6-b98b-838698063bae', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 50000.0, 'created_at': '2025-10-07T22:43:28.572595', 'updated_at': '2025-10-07T22:43:52.992638', 'is_finalized': True, 'is_deficit': False}]}, 'e81c3366-a6ba-43b1-9be3-9042fe420576': {'goal_name': 'Plot of a land', 'total_allocated': 119280.0, 'allocations': [{'allocation_id': '62af914a-dd28-4515-855b-63bf6c4f2a23', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 119280.0, 'created_at': '2025-10-07T22:43:28.587913', 'updated_at': '2025-10-07T22:43:52.998095', 'is_finalized': True, 'is_deficit': False}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-08 08:12:15,276 - app - INFO - Allocation 10bb5e9a-3887-4aa6-b98b-838698063bae already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-08 08:12:15,283 - app - INFO - Allocation 62af914a-dd28-4515-855b-63bf6c4f2a23 already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-08 11:01:52,154 - app - INFO - Request data: {'file_path': '/home/patrick/goalifai/app/files/default_categories.json'} - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:116]
2025-10-08 11:11:43,403 - app - INFO - Category Salary already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,405 - app - INFO - Category Freelance Income already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,407 - app - INFO - Category Investment Income already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,408 - app - INFO - Category Rental Income already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,410 - app - INFO - Category Bank Interest already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,412 - app - INFO - Category Groceries already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,413 - app - INFO - Category Utilities already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,415 - app - INFO - Category Rent/Mortgage already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,416 - app - INFO - Category Transportation already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,417 - app - INFO - Category Insurance already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,419 - app - INFO - Category Entertainment already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,421 - app - INFO - Category Medical already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,423 - app - INFO - Category Debt Repayment already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,425 - app - INFO - Category Savings already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,426 - app - INFO - Category Taxes already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,428 - app - INFO - Category Education already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,429 - app - INFO - Category Gifts & Donations already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:11:43,431 - app - INFO - Category Miscellaneous already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,668 - app - INFO - Category Salary already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,670 - app - INFO - Category Freelance Income already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,672 - app - INFO - Category Investment Income already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,674 - app - INFO - Category Rental Income already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,676 - app - INFO - Category Bank Interest already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,678 - app - INFO - Category Groceries already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,680 - app - INFO - Category Utilities already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,681 - app - INFO - Category Rent/Mortgage already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,682 - app - INFO - Category Transportation already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,684 - app - INFO - Category Insurance already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,685 - app - INFO - Category Entertainment already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,686 - app - INFO - Category Medical already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,688 - app - INFO - Category Debt Repayment already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,690 - app - INFO - Category Savings already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,692 - app - INFO - Category Taxes already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,693 - app - INFO - Category Education already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,695 - app - INFO - Category Gifts & Donations already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,696 - app - INFO - Category Miscellaneous already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,697 - app - INFO - Category Surplus already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:13:32,699 - app - INFO - Category Deficit already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,049 - app - INFO - Category Salary already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,052 - app - INFO - Category Freelance Income already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,055 - app - INFO - Category Investment Income already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,057 - app - INFO - Category Rental Income already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,058 - app - INFO - Category Bank Interest already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,060 - app - INFO - Category Groceries already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,062 - app - INFO - Category Utilities already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,063 - app - INFO - Category Rent/Mortgage already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,064 - app - INFO - Category Transportation already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,066 - app - INFO - Category Insurance already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,067 - app - INFO - Category Entertainment already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,069 - app - INFO - Category Medical already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,072 - app - INFO - Category Debt Repayment already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,074 - app - INFO - Category Savings already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,075 - app - INFO - Category Taxes already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,077 - app - INFO - Category Education already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,079 - app - INFO - Category Gifts & Donations already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,080 - app - INFO - Category Miscellaneous already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,081 - app - INFO - Category Surplus already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 11:14:29,083 - app - INFO - Category Deficit already exists. Skipping. - [in /home/patrick/goalifai/app/api/v1/hybrid/categories.py:245]
2025-10-08 18:32:27,239 - app - INFO - Finalizing allocations for month 2025-10: {'78704e65-4079-4496-a482-871ce01d38ba': {'goal_name': 'Trip to Kbuye', 'total_allocated': 50000.0, 'allocations': [{'allocation_id': '10bb5e9a-3887-4aa6-b98b-838698063bae', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 50000.0, 'created_at': '2025-10-07T22:43:28.572595', 'updated_at': '2025-10-07T22:43:52.992638', 'is_finalized': True, 'is_deficit': False}]}, 'e81c3366-a6ba-43b1-9be3-9042fe420576': {'goal_name': 'Plot of a land', 'total_allocated': 119280.0, 'allocations': [{'allocation_id': '62af914a-dd28-4515-855b-63bf6c4f2a23', 'user_id': 'f280eb9e-063d-40ae-83f2-8c47aeb9ea3f', 'month': '2025-10', 'allocated_amount': 119280.0, 'created_at': '2025-10-07T22:43:28.587913', 'updated_at': '2025-10-07T22:43:52.998095', 'is_finalized': True, 'is_deficit': False}]}} - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:110]
2025-10-08 18:32:27,244 - app - INFO - Allocation 10bb5e9a-3887-4aa6-b98b-838698063bae already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-08 18:32:27,248 - app - INFO - Allocation 62af914a-dd28-4515-855b-63bf6c4f2a23 already finalized. Skipping. - [in /home/patrick/goalifai/app/api/v1/client/goal_recalculation.py:125]
2025-10-08 18:43:45,071 - app - ERROR - An error occurred: 'dict' object has no attribute 'to_dict' - [in /home/patrick/goalifai/app/api/v1/client/goals.py:157]
2025-10-08 18:43:45,073 - app - ERROR - Traceback (most recent call last):
  File "/home/patrick/goalifai/app/api/v1/client/goals.py", line 147, in bulk_create_goals
    created_goals.append(goal.to_dict())
                         ^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'to_dict'
 - [in /home/patrick/goalifai/app/api/v1/client/goals.py:158]
2025-10-08 18:45:52,545 - app - INFO - 2 goals created successfully - [in /home/patrick/goalifai/app/api/v1/client/goals.py:149]
